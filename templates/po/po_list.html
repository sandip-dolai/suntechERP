{% extends 'base/base.html' %}
{% block title %}
  Purchase Orders - Suntech ERP
{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center flex-wrap mb-4">
    <h2 class="mb-2 mb-md-0">Purchase Orders</h2>
    {% if perms.po.add_purchaseorder %}
      <a href="{% url 'po:po_create' %}" class="btn btn-success"><i class="bi bi-plus-lg"></i> Create PO</a>
    {% endif %}
  </div>
  <table class="table table-bordered table-responsive table-hover">
    <thead class="table-danger">
      <tr>
        <th class="text-center">PO Number</th>
        <th class="text-center">Company</th>
        <th class="text-center">Material</th>
        <th class="text-center">Quantity</th>
        <th class="text-center">Status</th>
        <th class="text-center">Created By</th> <!-- NEW COLUMN -->
        <th class="text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for po in pos %}
        <tr>
          <td class="text-center">{{ po.po_number }}</td>
          <td class="text-center">{{ po.company }}</td>
          <td class="text-center">{{ po.material_description }}</td>
          <td class="text-center">{{ po.quantity }}</td>
          <td class="text-center">{{ po.status }}</td>
          <td class="text-center">{{ po.creator_name|default:'â€”' }}</td> <!-- DISPLAY CREATOR NAME -->
          <td class="text-center">
            {% if perms.po.change_purchaseorder %}
              <a href="{% url 'po:po_edit' po.pk %}" class="btn btn-primary btn-sm"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
            {% endif %}
            {% if perms.po.delete_purchaseorder %}
              <a href="{% url 'po:po_delete' po.pk %}" class="btn btn-danger btn-sm"><i class="fa fa-trash-o" aria-hidden="true"></i></a>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
